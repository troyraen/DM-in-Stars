##!/usr/local/bin/bash
#!/bin/bash

##
#   This file should be used in two steps:
#
#   1.  generate run files that make directories and cp, sed inlist_cluster files into them
#       A.  comment out '$MESA_BASE/star' line in rnIsoMass_template.sh file
#       B.  run this file (gen_rnIso_files)
#       C.  run condor_wrapper.sh to run each rnIsoMass$n.sh file
#
#   2.  generate run files that actually run MESA
#       A.  comment out 'mkdir', 'cp', and 'sed' lines in rnIsoMass_template.sh file
#       B.  uncomment '$MESA_BASE/star' line in rnIsoMass_template.sh file
#       C.  run this file (gen_rnIso_files)
#       D.  do condor_submit isoc.submit
#
##

imdir="rnIsoMasses"
mkdir -p $imdir

# Generate rn files from rnIsoMass_template with subset of mass values (mvals)
#
for n in {1..9}; do
    fname="$imdir/rnIsoMass$n.sh"
    cp rnIsoMass_template.sh $fname
    if [ "9" != "$n" ]; then
        sed -ie 's/p9/p'$n'/g; s/4.9/4.'$n'/g; s/3.9/3.'$n'/g; s/2.9/2.'$n'/g; s/1.9/1.'$n'/g' $fname
    fi
done

# extra mass range
fname="$imdir/rnIsoMass0.sh"
cp rnIsoMass_template.sh $fname
sed -ie 's/mvals=.*/mvals=( [m0p9]=0.9 [m0p8]=0.8 )/g; s/mord=.*/mord=( m0p9 m0p8 )/g' $fname
